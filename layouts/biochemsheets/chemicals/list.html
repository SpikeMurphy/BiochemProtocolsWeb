{{ define "main" }}

<section class="sheets-book">

  <header class="sheets-header">
    <h1>{{ .Title }}</h1>
    {{ with .Params.description }}
      <p class="sheets-intro">{{ . }}</p>
    {{ end }}
  </header>

  {{/* ===================================== */}}
  {{/* LEVEL 0 — chemicals landing page     */}}
  {{/* ===================================== */}}
  {{ if and .IsSection (eq .CurrentSection.Title "Chemicals") }}

    <ul class="sheets-list">
      {{ range .Sections.ByTitle }}
        <li>
          <a href="{{ .RelPermalink }}">
            <span class="sheets-left">
              <span class="sheets-name">{{ .Title }}</span>
            </span>

            <span class="sheets-leader"></span>
          </a>
        </li>
      {{ end }}
    </ul>

  {{/* ===================================== */}}
  {{/* LEVEL 1 — chapter page               */}}
  {{/* ===================================== */}}
  {{ else if gt (len .Sections) 0 }}

    {{ range .Sections.ByTitle }}

      <div class="subchapter-row">
        <a href="{{ .RelPermalink }}">
          <span class="sheets-left">
            <span class="subchapter-name">{{ .Title }}</span>
          </span>
          <span class="sheets-leader"></span>
        </a>
      </div>

      <ul class="sheets-list">
        {{ range .Pages.ByTitle }}
          <li>
            <a href="{{ .RelPermalink }}">
              <span class="sheets-left">
                <span class="sheets-name">{{ .Title }}</span>
                {{ with .Params.formula }}
                  <span class="sheets-formula">({{ delimit . ", " | safeHTML }})</span>
                {{ end }}
              </span>

              <span class="sheets-leader"></span>

              <span class="sheets-right">
                {{ with .Params.cas_number }}{{ delimit . ", " | safeHTML }}{{ end }}
              </span>
            </a>
          </li>
        {{ end }}
      </ul>

    {{ end }}

  {{/* ===================================== */}}
  {{/* LEVEL 2 — subchapter page             */}}
  {{/* ===================================== */}}
  {{ else }}

    <ul class="sheets-list">
      {{ range .Pages.ByTitle }}
        <li>
          <a href="{{ .RelPermalink }}">
            <span class="sheets-left">
              <span class="sheets-name">{{ .Title }}</span>
              {{ with .Params.formula }}
                <span class="sheets-formula">({{ delimit . ", " | safeHTML }})</span>
              {{ end }}
            </span>

            <span class="sheets-leader"></span>

            <span class="sheets-right">
              {{ with .Params.cas_number }}{{ delimit . ", " | safeHTML }}{{ end }}
            </span>
          </a>
        </li>
      {{ end }}
    </ul>

  {{ end }}

</section>

{{ .Content }}

{{ end }}